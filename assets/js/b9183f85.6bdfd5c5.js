(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{102:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return s})),t.d(n,"toc",(function(){return p})),t.d(n,"default",(function(){return u}));var o=t(3),a=t(8),c=(t(0),t(127)),r=(t(131),t(126)),l=t(144),i={slug:"toTopbutton",title:"B\u7ad9\u5c0f\u706b\u7bad\u70b9\u51fb\u7f6e\u9876\u6309\u94ae"},s={unversionedId:"\u535a\u5ba2\u5efa\u8bbe/2021-04-14-toTopbutton",id:"\u535a\u5ba2\u5efa\u8bbe/2021-04-14-toTopbutton",isDocsHomePage:!1,title:"B\u7ad9\u5c0f\u706b\u7bad\u70b9\u51fb\u7f6e\u9876\u6309\u94ae",description:"&emsp;&emsp;\u4e3a\u535a\u5ba2\u4e2d\u7684\u5185\u5bb9\u9875\u9762\u52a0\u4e0a\u7f6e\u9876\u6309\u94ae\uff0c\u5373\uff1a",source:"@site/docs/\u535a\u5ba2\u5efa\u8bbe/2021-04-14-toTopbutton.md",slug:"/\u535a\u5ba2\u5efa\u8bbe/toTopbutton",permalink:"/docs/\u535a\u5ba2\u5efa\u8bbe/toTopbutton",version:"current",sidebar:"docs",previous:{title:"\u535a\u5ba2\u5934\u90e8\u6837\u5f0f\u81ea\u5b9a\u4e49",permalink:"/docs/\u535a\u5ba2\u5efa\u8bbe/blog-header-component"},next:{title:"\u6dfb\u52a0\u8bc4\u8bba\u529f\u80fd",permalink:"/docs/\u535a\u5ba2\u5efa\u8bbe/add comment component"}},p=[{value:"\u57fa\u672c\u7ec4\u4ef6\u5b9e\u73b0",id:"\u57fa\u672c\u7ec4\u4ef6\u5b9e\u73b0",children:[]},{value:"\u6548\u679c\u4f18\u5316 + \u8282\u6d41",id:"\u6548\u679c\u4f18\u5316--\u8282\u6d41",children:[]}],b={toc:p};function u(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(o.a)({},b,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)(r.a,{tags:["\u535a\u5ba2\u5efa\u8bbe","\u8282\u6d41"],time:"2021-04-14",mdxType:"CustomComponent"}),Object(c.b)("p",null,"\u2003","\u2003","\u4e3a\u535a\u5ba2\u4e2d\u7684\u5185\u5bb9\u9875\u9762\u52a0\u4e0a\u7f6e\u9876\u6309\u94ae\uff0c\u5373\uff1a"),Object(c.b)("img",{src:"https://gitee.com/ylea/imagehost/raw/master/img/backtotop1.gif",alt:"backtotop1",style:{zoom:"80%"}}),Object(c.b)("h2",{id:"\u57fa\u672c\u7ec4\u4ef6\u5b9e\u73b0"},"\u57fa\u672c\u7ec4\u4ef6\u5b9e\u73b0"),Object(c.b)("p",null,"\u2003","\u2003","b \u7ad9\u7684\u5c0f\u706b\u7bad\u6837\u5f0f\u6765\u81ea\u4e8e\uff1a",Object(c.b)("a",{parentName:"p",href:"https://coor.top/archives/21011814"},"https://coor.top/archives/21011814")),Object(c.b)("p",null,"\u2003","\u2003","\u5c0f\u706b\u7bad\u56fe\u6807\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u957f\u56fe\uff1a"),Object(c.b)("img",{src:"https://cdn.jsdelivr.net/gh/cetr/cdn@master/blog/img/space-to-top.png",style:{zoom:"80%"}}),Object(c.b)("p",null,"\u2003","\u2003","\u6211\u4eec\u9650\u5236\u5143\u7d20\u7684\u5bbd\u9ad8\uff0c\u8ba9\u6211\u4eec\u6bcf\u6b21\u53ea\u80fd\u5bb9\u7eb3\u4e00\u4e2a\u5c0f\u706b\u7bad\uff0c\u5f53\u9f20\u6807\u79fb\uff08hover\uff09\u5230\u8fd9\u4e2a\u5143\u7d20\u4e0a\u65f6\uff0c\u4f7f\u7528 ",Object(c.b)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation"},"animation")," \u5c5e\u6027\uff0c\u5728 0.4 \u79d2\u5185\u64ad\u653e\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u5173\u952e\u5e27 ",Object(c.b)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/@keyframes"},"@keyframes")," \uff0c\u901a\u8fc7\u80cc\u666f x \u8f74\u7684\u504f\u79fb\uff0c\u5c06\u8fd9\u4e2a\u957f\u56fe\u4e2d\u7684\u6bcf\u4e2a\u5c0f\u706b\u7bad\u8fdb\u884c\u4e00\u4e2a\u5feb\u901f\u7684\u5207\u6362\u6765\u8fbe\u5230\u52a8\u753b\u6548\u679c\u3002"),Object(c.b)("p",null,"CSS \u6837\u5f0f\u4ee3\u7801\u5982\u4e0b\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-css"},'.back-to-top {\n    background-image: url("https://cdn.jsdelivr.net/gh/cetr/cdn@master/blog/img/space-to-top.png");\n    width: 62px;\n    height: 88px;\n    position: fixed;\n    bottom: 80px;\n    right: 30px;\n}\n\n.back-to-top:hover {\n    cursor: pointer;\n    animation: to-top-fly .4s steps(1) infinite;\n}\n\n@keyframes to-top-fly {\n    0% {\n        background-position-x: -142.5px;\n    }\n\n    16.5% {\n        background-position-x: -284.5px;\n    }\n\n    33% {\n        background-position-x: -429.5px;\n    }\n\n    49.5% {\n        background-position-x: -570.5px;\n    }\n\n    66% {\n        background-position-x: -714.5px;\n    }\n\n    82.5% {\n        background-position-x: -856.5px;\n    }\n\n    100% {\n        background-position-x: 0px;\n    }\n}\n')),Object(c.b)("p",null,"\u2003","\u2003","\u800c\u70b9\u51fb\u7f6e\u9876\u529f\u80fd\u53ef\u4ee5\u901a\u8fc7 ",Object(c.b)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollTo"},"scrollTo")," \u6765\u5b8c\u6210\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-js"},'function toTop(e) {\n    window.scrollTo({ \n        top: 0, \n        behavior: "smooth" \n    });\n}\n')),Object(c.b)("p",null,"\u2003","\u2003","\u8fd9\u4e2a\u529f\u80fd\u9700\u8981\u52a0\u5165\u5230\u6587\u7ae0\u9875\u9762\u4e2d\uff0c\u4e0d\u8fc7\u67e5\u9605 Docusaurus \u6587\u6863\uff0c\u6ca1\u6709\u627e\u5230\u4e00\u4e2a\u5408\u9002\u7684\u5d4c\u5165\u4f4d\u7f6e\uff0c\u56e0\u6b64\u4f7f\u7528\u4e86\u4e00\u4e2a\u6700\u7b28\u7684\u65b9\u6cd5\uff1a\u5c06\u8fd9\u4e2a\u7f6e\u9876\u6309\u94ae\u5c01\u88c5\u6210\u4e00\u4e2a\u7ec4\u4ef6\uff0c Docusaurus \u7684 markdown \u652f\u6301 jsx \u8bed\u6cd5\uff0c\u4e3a\u4e86\u5728\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u52a0\u5165\u8fd9\u4e2a\u6309\u94ae\uff0c\u90a3\u4e48\u5728\u6bcf\u4e2a\u9875\u9762\u4e2d\u90fd\u5f15\u7528\u8fd9\u4e2a\u7ec4\u4ef6\u5c31\u884c\u4e86\u3002\u914d\u5408\u6a21\u677f\u5e93 ",Object(c.b)("a",{parentName:"p",href:"https://yleave.top/docs/%E5%8D%9A%E5%AE%A2%E5%BB%BA%E8%AE%BE/hygen"},"hygen"),"\uff0c\u6dfb\u52a0\u9ed8\u8ba4\u7ec4\u4ef6\u5012\u662f\u4e0d\u9ebb\u70e6\uff0c\u5c31\u662f\u663e\u5f97\u5f88\u5197\u4f59..."),Object(c.b)("p",null,"\u2003","\u2003","\u7ec4\u4ef6\u57fa\u672c\u5c01\u88c5\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport { useEffect } from 'react';\nimport './index.css';\n\nfunction toTop(e) {\n    window.scrollTo({ \n        top: 0, \n        behavior: \"smooth\" \n    });\n}\n\nfunction BackToTop() {\n    // \u5f85\u7528\n    useEffect(() => {\n        console.log('init backtotop')\n        return function() {\n            console.log('dispose backtotop');\n        };\n    }, []);\n\n    return (\n        <div className=\"back-to-top\" onClick={toTop}></div>\n    );\n}\n\nexport default BackToTop;\n")),Object(c.b)("h2",{id:"\u6548\u679c\u4f18\u5316--\u8282\u6d41"},"\u6548\u679c\u4f18\u5316 + \u8282\u6d41"),Object(c.b)("p",null,"\u2003","\u2003",Object(c.b)("strong",{parentName:"p"},"\u89c6\u89c9\u4f18\u5316"),"\uff1a\u4f18\u5316\u6309\u94ae\u663e\u793a\u65f6\u673a\uff0c\u5f53\u6eda\u8f6e\u672a\u6eda\u52a8\u65f6\uff0c\u6309\u94ae\u9690\u85cf\uff0c\u6eda\u52a8\u65f6\u663e\u793a\uff1b\u6216\u662f\u6839\u636e ",Object(c.b)("inlineCode",{parentName:"p"},"scrollTop")," \u548c ",Object(c.b)("inlineCode",{parentName:"p"},"clientHeight")," \u6765\u5224\u65ad\u5f53\u5f53\u524d\u9875\u9762\u6eda\u52a8\u4e86\u4e00\u4e2a\u89c6\u53e3\u9ad8\u5ea6\u65f6\uff0c\u663e\u793a\u6309\u94ae\u3002"),Object(c.b)("p",null,"\u2003","\u2003","\u6240\u4ee5\u9700\u8981\u76d1\u542c ",Object(c.b)("a",{parentName:"p",href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/scroll_event"},"scroll")," \u4e8b\u4ef6\uff0c\u5f53\u6eda\u8f6e\u8fdb\u884c\u6eda\u52a8\u65f6\uff0c\u89e6\u53d1\u5224\u65ad\u903b\u8f91\uff0c\u4e0d\u8fc7\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",Object(c.b)("inlineCode",{parentName:"p"},"scroll")," \u4e8b\u4ef6\u53ef\u88ab\u9ad8\u9891\u89e6\u53d1\uff0c\u4e3a\u4e86\u6027\u80fd\u8003\u8651\uff0c\u53ef\u4ee5\u8fdb\u884c\u8282\u6d41\u9650\u5236\u3002"),Object(c.b)("p",null,"\u2003","\u2003",Object(c.b)("strong",{parentName:"p"},"\u8282\u6d41"),"\u7684\u6548\u679c\u662f\u663e\u8457\u7684\uff0c\u5b83\u53ef\u4ee5\u5728\u4e0d\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u7684\u540c\u65f6\u6781\u5927\u7684\u51cf\u5c11\u4e86\u51fd\u6570\u7684\u8c03\u7528\u6b21\u6570\u3002"),Object(c.b)("p",null,"\u2003","\u2003","\u7ecf\u5b9e\u6d4b\uff1a\u4e00\u4e2a\u9875\u9762\u4e2d\uff0c\u5728\u9875\u9762\u5e95\u90e8\u70b9\u51fb\u7f6e\u9876\u6309\u94ae\u65f6\uff0c\u82e5\u672a\u52a0\u8282\u6d41\u4f18\u5316\uff0c\u90a3\u4e48 ",Object(c.b)("inlineCode",{parentName:"p"},"scroll")," \u4e8b\u4ef6\u4e2d\u6ce8\u518c\u7684\u56de\u8c03\u51fd\u6570\u8c03\u7528\u6b21\u6570\u662f\uff1a",Object(c.b)("strong",{parentName:"p"},"42 \u6b21\uff01\uff01"),"\uff0c\u800c\u4f7f\u7528\u4e86\u8282\u6d41\u4f18\u5316\u540e\uff0c\u4e00\u6b21\u7f6e\u9876\u56de\u8c03\u51fd\u6570\u7684\u8c03\u7528\u6b21\u6570\u662f\uff1a",Object(c.b)("strong",{parentName:"p"},"6 \u6b21\uff01\uff01\uff01"),"\uff0c\u56e0\u6b64\u5728\u5408\u9002\u7684\u4f4d\u7f6e\u4f7f\u7528\u9632\u6296/\u8282\u6d41\u4f18\u5316\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\uff01"),Object(c.b)("p",null,"\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a"),Object(c.b)("p",null,"\u8282\u6d41\u51fd\u6570\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-js"},"// \u5ef6\u8fdf\u8c03\u7528\u7684 throttle\nfunction throttle(fn, wait) {\n    let timer = null;\n\n    return function() {\n        if (!timer) {\n            timer = setTimeout(() => {\n                fn.apply(this, [...arguments]);\n                timer = null;\n            }, wait);\n        }\n    };\n}\n\nexport default throttle;\n")),Object(c.b)("p",null,"\u7f6e\u9876\u7ec4\u4ef6\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport { useEffect } from 'react';\nimport throttle from '@site/src/utils/throttle.js';\nimport './index.css';\n\nfunction toTop(e) {\n    window.scrollTo({ \n        top: 0, \n        behavior: \"smooth\" \n    });\n}\n\nfunction onScroll(e) {\n    console.log('toggle');\n    let ele = document.getElementsByClassName('back-to-top')[0];\n    if (document.documentElement.scrollTop === 0) {\n        ele.style.visibility = 'hidden';\n    } else {\n        ele.style.visibility = 'visible';\n    }\n}\n\n// \u8282\u6d41\u4f18\u5316\uff0c\u6bcf 100 \u6beb\u79d2\u8c03\u7528\u4e00\u6b21\nconst fn = throttle(onScroll, 100);\n\nfunction BackToTop() {\n    useEffect(() => {\n        window.addEventListener('scroll', fn);\n        return function() {\n            window.removeEventListener('scroll', fn);\n        };\n    }, []);\n\n    return (\n        <div className=\"back-to-top\" onClick={toTop}></div>\n    );\n}\n\nexport default BackToTop;\n")),Object(c.b)(l.a,{mdxType:"Comment"}))}u.isMDXComponent=!0},126:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var o=t(0),a=t.n(o),c=t(146);t(59);function r(e){var n=document.getElementById("busuanzi_value_page_pv");n&&(n.innerText=e.page_pv);var t=document.getElementById("busuanzi_value_site_pv");t&&(t.innerText=e.site_pv)}var l=function(e){return Object(o.useEffect)((function(){new Promise((function(e,n){var t="BusuanziCallback_"+Math.floor(1099511627776*Math.random()),o="//busuanzi.ibruce.info/busuanzi?jsonpCallback="+t,a=document.createElement("script");a.type="text/javascript",a.defer=!0,a.src=o,a.referrerPolicy="no-referrer-when-downgrade",document.getElementsByTagName("head")[0].appendChild(a),window[t]=function(n){e(n),document.removeChild(a)}})).then(r)}),[]),a.a.createElement("div",{className:"header-container"},a.a.createElement("span",{id:"busuanzi_container_page_pv"},a.a.createElement("i",{className:"iconfont iconrili"}),a.a.createElement("span",null,e.time),a.a.createElement("span",{className:"vertical-gap"},"|"),a.a.createElement("i",{className:"iconfont iconyanjing"}),a.a.createElement("span",{id:"busuanzi_value_page_pv"},a.a.createElement("i",{className:"fa fa-spinner fa-spin"}))),a.a.createElement("div",{className:"tags-container"},a.a.createElement("i",{className:"iconfont iconlabel-01"}),e.tags.map((function(e){return a.a.createElement("span",{className:"blog-tag"},"  ",e," ")}))))};function i(e){return a.a.createElement("div",null,a.a.createElement(l,{tags:e.tags,time:e.time}),a.a.createElement(c.a,null))}},131:function(e,n,t){"use strict";var o=t(0),a=t.n(o);n.a=function(e){var n=e.children,t=e.color;return a.a.createElement("span",{style:{backgroundColor:t||"#0099CC",borderRadius:"4px",color:"white",padding:"0.2rem"}},n)}}}]);