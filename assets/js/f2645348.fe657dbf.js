"use strict";(self.webpackChunkyle_blog=self.webpackChunkyle_blog||[]).push([[1073],{6123:function(e,t,n){n.d(t,{dK:function(){return o},_k:function(){return l},vc:function(){return s},rx:function(){return r},qo:function(){return c},Hk:function(){return d},Iz:function(){return m}});var i=n(47931),a=n.n(i);n(95570)(a()),n(93523).w(a()),n(96451)(a());var o=["en","zh"],l=!1,s=null,r="5228ca85",c=8,d=50,m={search_placeholder:"Search",see_all_results:"\u67e5\u770b\u6240\u6709\u76f8\u5173\u7ed3\u679c\ud83d\udc40",no_results:"\u62b1\u6b49\uff0c\u6682\u65f6\u6ca1\u6709\u8fd9\u65b9\u9762\u7684\u6587\u7ae0\ud83d\ude23.",search_results_for:'\u5173\u4e8e "{{ keyword }}" \u7684\u6240\u6709\u6587\u7ae0',search_the_documentation:"\u4ece\u5f53\u524d\u7ad9\u70b9\u4e2d\u67e5\u627e\u5173\u952e\u5b57",count_documents_found:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",count_documents_found_plural:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",no_documents_were_found:"\u5565\u4e5f\u6ca1\u627e\u5230\uff0c\u6362\u4e00\u4e2a\u5173\u952e\u8bcd\u5427\ud83d\ude35"}},99546:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});n(38831);var i,a,o,l,s,r,c,d,m,u,h,v,p,A,f=n(23181),g=n(23478),M=n(15058),w=n(46311),E=n(15851),x=n(93174),y=n(4926),S=n(4045),b=n(22278),Z=n(6910),k=n(83655),z=n(4475),F=n(48352),L=n(42841),W=n(88693),Y=n(27106),j=n(91971),P=n.p+"assets/images/grasslight-big-43728102ca7c7ab4a5e3eedb0572f7b9.jpg",C=function(e){function t(){var t;return t=e.call(this)||this,(0,w.Z)((0,g.Z)(t),"initFriends",(function(){fetch("https://qc9pvu.fn.thelarkcloud.com/getFriendList").then((function(e){if(e.ok)return e.json();throw new Error("\u83b7\u53d6\u6570\u636e\u5931\u8d25")})).then((function(e){e.forEach((function(e){var n=e.friendName,i=(e.blogTitle,e.friendAddr,e.aWord,new D({name:n}));i.init(),t.models.push(i),e.model=i,t.modelsMap[n]=e}))})).catch((function(e){return console.log(e)}))})),(0,w.Z)((0,g.Z)(t),"initFlowers",(function(){var e=3e3,n=new S.yGw,i=new S.Pa4,a=new S.USm,l=new S._fP,s=new S.Pa4,r=function(){var e=Math.random()<.5?1:-1,t=Math.random()<.5?1:-1,o=8e3*Math.random(),r=8e3*Math.random();o<1500?r=1500+6500*Math.random():r<1500&&(o=1500+6500*Math.random()),i.x=o*e,i.y=-250,i.z=r*t,a.x=Math.PI/2,a.z=Math.PI/2,l.setFromEuler(a);var c=500*Math.random()+200;s.x=s.y=s.z=c,n.compose(i,l,s)};u.load("https://cdn.jsdelivr.net/gh/yleave/models/Flower.glb",(function(i){for(var a=i.scene.getObjectByName("Stem"),l=i.scene.getObjectByName("Blossom"),s=a.geometry.clone(),c=l.geometry.clone(),d=a.material,m=l.material,u=new S.SPe(s,d,e),h=new S.SPe(c,m,e),v=[15861127,15914105,15911033,15904887,15877125],p=new S.Ilk,A=0;A<e;A++)p.setHex(v[Math.floor(Math.random()*v.length)]),h.setColorAt(A,p),r(),u.setMatrixAt(A,n),h.setMatrixAt(A,n);t.stemMesh=u,t.blossomMesh=h,o.add(u),o.add(h)}))})),(0,w.Z)((0,g.Z)(t),"initHouse",(function(){u.load("https://cdn.jsdelivr.net/gh/yleave/models/LittlestTokyo.glb",(function(e){var n=e.scene;n.scale.set(5,5,5),n.position.y=750,n.position.x=400,t.houseMixer=new S.Xcj(n),t.houseMixer.clipAction(e.animations[0]).play(),t.house=n,t.action=e.animations[0],o.add(n)}))})),(0,w.Z)((0,g.Z)(t),"initSkyAndSun",(function(){var e=new Y.q;e.scale.setScalar(45e4),o.add(e);var t=new S.Pa4,n={turbidity:10,rayleigh:3,mieCoefficient:.005,mieDirectionalG:.7,elevation:2,azimuth:180,exposure:i.toneMappingExposure},l=e.material.uniforms;l.turbidity.value=n.turbidity,l.rayleigh.value=n.rayleigh,l.mieCoefficient.value=n.mieCoefficient,l.mieDirectionalG.value=n.mieDirectionalG;var s=S.M8C.degToRad(90-n.elevation),r=S.M8C.degToRad(n.azimuth);t.setFromSphericalCoords(1,s,r),l.sunPosition.value.copy(t),i.toneMappingExposure=n.exposure,i.render(o,a)})),(0,w.Z)((0,g.Z)(t),"initDialog",(function(){(h=document.createElement("div")).className="model-dialog";var e=document.createElement("div");(p=document.createElement("a")).target="_blank",e.appendChild(p),A=document.createElement("div"),h.append(e,A),(v=new z.j(h)).name="dialog"})),(0,w.Z)((0,g.Z)(t),"clickLabel",(function(e){var n=e.target.name,i=n&&t.modelsMap[n];if(i){var l=i.model;if(t.lastActiveModel&&t.lastActiveModel!==l&&(t.lastActiveModel.activeEmote("Wave"),t.lastActiveModel.pause=!1,o.remove(v),t.lastActiveModel=null),l.activeEmote("Wave"),o.getObjectByName("dialog"))o.remove(v);else{var s=l.model.position;v.position.set(s.x,s.y+450,s.z),setTimeout((function(){return l.pause=!0}),2e3),p.innerText=i.blogTitle,p.href=i.friendAddr,A.innerText=i.aWord,o.add(v);var r=1200*Math.sin(l.angle),c=1200*Math.cos(l.angle),d=r+l.model.position.x,m=c+l.model.position.z;new F.kX(a.position).to({x:d,y:400,z:m},800).easing(F.oY.Quadratic.Out).start().onComplete((function(){a.lookAt(s)})),t.lastActiveModel=l}}else o.getObjectByName("dialog")&&(o.remove(v),t.lastActiveModel&&(t.lastActiveModel.activeEmote("Wave"),t.lastActiveModel=null))})),(0,w.Z)((0,g.Z)(t),"getMouse",(function(e){var t=i.domElement,n=new S.FM8;return n.x=(e.clientX-t.getBoundingClientRect().left)/t.offsetWidth*2-1,n.y=-(e.clientY-t.getBoundingClientRect().top)/t.offsetHeight*2+1,n})),(0,w.Z)((0,g.Z)(t),"getIntersects",(function(e){var t=new S.iMs;t.setFromCamera(e,a);var n=t.intersectObjects(o.children);if(n.length)return n[0]})),(0,w.Z)((0,g.Z)(t),"onWindowResize",(function(){var e=s.clientWidth,t=s.clientHeight;a.aspect=e/t,a.updateProjectionMatrix(),i.setSize(e,t),r.setSize(e,t)})),(0,w.Z)((0,g.Z)(t),"onScrollDown",(function(e){console.log("scroll"),window.scrollTo({top:650,behavior:"smooth"})})),(0,w.Z)((0,g.Z)(t),"renderLoop",(function(){if(t.models.forEach((function(e){e.update()})),i.render(o,a),r.render(o,a),t.rfa=requestAnimationFrame(t.renderLoop),F.Vx(),c.update(),t.houseMixer){var e=t.clock.getDelta();t.houseMixer.update(e)}})),t.models=[],t.modelsMap={},t.lastActiveModel=null,t.houseMixer=null,t.clock=new S.SUY,t}(0,M.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){(0,j.df)(),s=document.getElementById("friends-canvas-container");var e=document.getElementById("friends-canvas"),t=s.clientHeight,n=s.clientWidth;(i=new S.CP7({canvas:e,antialias:!0})).setPixelRatio(window.devicePixelRatio),i.setSize(n,t),i.outputEncoding=S.knz,i.toneMapping=S.LY2,i.toneMappingExposure=.5,(r=new z.M).setSize(n,t),r.domElement.style.position="absolute",r.domElement.style.top="60px",s.appendChild(r.domElement),(c=new W.Z).dom.style.top="60px",s.append(c.dom),(a=new S.cPb(60,n/t,1,3e4)).position.set(-3e3,1e3,4e3),(o=new S.xsS).fog=new S.ybr(13426943,500,1e4),o.add(new S.Mig(6710886,1));var h=new S.Ox3(14674943,1.2);h.position.set(-50,200,-100),h.position.multiplyScalar(1.3),h.castShadow=!0,h.shadow.mapSize.width=1024,h.shadow.mapSize.height=1024;var v=300;h.shadow.camera.left=-v,h.shadow.camera.right=v,h.shadow.camera.top=v,h.shadow.camera.bottom=-v,h.shadow.camera.far=1e3,o.add(h),(l=new b.z(a,r.domElement)).maxPolarAngle=.5*Math.PI,l.minDistance=20,l.maxDistance=1e4;var p=(new S.dpR).load(P);p.wrapS=p.wrapT=S.rpg,p.repeat.set(25,25),p.anisotropy=16,p.encoding=S.knz;var A=new S.YBo({map:p}),f=new S.Kj0(new S._12(5e4,5e4),A);f.position.y=-250,f.rotation.x=-Math.PI/2,f.receiveShadow=!0,o.add(f),(d=new k._).setDecoderPath("https://unpkg.com/three@0.123.0/examples/js/libs/draco/gltf/"),m=new Z.E,(u=new Z.E).setDRACOLoader(d),this.initSkyAndSun(),this.initHouse(),this.initFriends(),this.initFlowers(),this.initDialog(),window.addEventListener("resize",this.onWindowResize),r.domElement.addEventListener("click",this.clickLabel),this.renderLoop()},n.componentWillUnmount=function(){this.models.forEach((function(e){e.despose()})),this.stemMesh&&(this.stemMesh.dispose(),this.blossomMesh.dispose(),this.stemMesh=null,this.blossomMesh=null),o.traverse((function(e){e.isMesh&&(e.geometry.dispose(),e.material.dispose())}));var e=this.action,t=this.house,n=this.houseMixer;n&&n.uncacheAction(e,t),this.action=null,this.house=null,this.houseMixer=null,this.clock=null,this.lastActiveModel=null,window.removeEventListener("resize",this.onWindowResize),r.domElement.removeEventListener("click",this.clickLabel),cancelAnimationFrame(this.rfa)},n.render=function(){return E.createElement(x.Z,null,E.createElement(y.Z,null,E.createElement("title",null,"\u53cb\u94fe | Yle")),E.createElement("div",{id:"friends-canvas-container"},E.createElement("canvas",{id:"friends-canvas"})),E.createElement("div",{className:"friends-scroll-down-bar"},E.createElement("div",{className:"friends-link",onClick:this.onScrollDown},E.createElement("div",{className:"friends-link-text"},"\u6dfb\u52a0\u53cb\u94fe"),E.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwEAYAAAAHkiXEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAA7FJREFUeNrt2F9MU1ccB/DvuRSooK0gEKts4mJbHdnik0tEXYKwFpOakDGYS4hT14SuZsuMxiHJJtvDtswtVVi3BqNOE5MBCdnMHFFZQhYkI3vYhtNBa4zOLJFiacE/Wyn97WFvmMPFIj0m/j5vN/d7f+ec+0vOaS/AGGOMMcYYYyytRKoPLvnW/8+fR+32KZto016xWmU5bQVKsHJkJJLjcdkiAwOqFzxXlkAg8Lc7J+f+pmT8zqHycr18dM2Sosld584BtXWlnfH49PuGVCeS/Em4Mj6pr9d2UDVebGqSBp8SO/B5dzcA4PWqKtUvcK4SFxLn7+UuW6Y1inIxcuaMXr6oPLZmwUtLl478CKDz1q3p9zXVC3rScQMU4wYolvIZMFt0lD4Q/QaDucKP69fz8qTB6L+e5NNEMfGOWCmi0fS/ivZv/qjJyjKbR28v/Cw3V7oea/LmpMNkQo8AvHMfdd4bIBwA7a2oyMgA4vFIRLqwRPYLwjgx8f+VyTTf85ouPzS6KfvUtm1Yh674zRMnZLnkV1oxdI/e2eMtSDFugGLcAMW4AYql/Cli4dojzuDuwsKsTzMOU3FBgSxHl0WPVrNxo2gGiAIBacFVeA5nk0k6jc3i++FhvfENjbQVz7pc4Q5v5ypfKCTL5dEXFKSDB3FVZAtHXZ204Dg2YLnZLCpQQwcsFmnuGQRw/sYNfETtNO506s0zUln4m3X/8DBQWyvE1NQD60i1AXd+favb2hoOoxJ2IByWvoCP/QMhd0kJgF8QmaFgCIPYomliHXy0ZfVqvfETO7Uurcxo1MuJBvEl1los6ICPOvXr6noTo6idnIxUeu22gitXZvXMu/JbvAUpxg1QjBug2Pz/E+5NvEfvDw7SUGavuOB2S3O5aIfTaEQx/UXelhbdwi5qJ3dzc37AvyDoGRuTxWgfTGJnWZnogI9mqpdNbyDa30+/a2ZRf+yYdJ42OkTfxWJ4JB8i5vAr6FHLrzriDO42mfCzYSvejsXSPT55xX4cPnly7EPPhLV1+/Z0jctbkGLcAMW4AYrN+yE8W4vOLvrB0BKPjw/e75p67fhxvbzYJV6lsupqXCUfHIsXS4MrYEfvxYv0NWKiZ2hIWs+RvE17+voAZKE1fet+bA7hh5Vf7I8G+y5dwj2cRlFpqSxHL4tMCjU0jLV53LaqGT6FKMJbkGLcAMW4AYo9NofwQ2vCetF47RotF5fp+cxMae4u5Wmbo1G0qZ4wY4wxxhhjjDHGGHvS/Qdo3yaWKxU4owAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wOS0yM1QxNjoxMzoxMCswODowMCZOycMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDktMjNUMTY6MTM6MTArMDg6MDBXE3F/AAAAU3RFWHRzdmc6YmFzZS11cmkAZmlsZTovLy9ob21lL2FkbWluL2ljb24tZm9udC90bXAvaWNvbl83azl2ajRhZm9lai9kaXF1eGlhbGFqaWFudG91LnN2Z28J8P0AAAAASUVORK5CYII=",className:"friends-link-arrow"}))),E.createElement(f.Z,{title:"\u53cb\u94fe\u6dfb\u52a0\u8bf4\u660e"},E.createElement("div",{className:"friends-link-description"},E.createElement("div",{className:"friends-description-left"},E.createElement("p",{style:{fontSize:"18px"}},"\u8bf7\u6309\u4ee5\u4e0b\u683c\u5f0f\u5728\u8bc4\u8bba\u533a\u56de\u590d\uff1a"),E.createElement("p",null,"\u6635\u79f0\uff1aYle"),E.createElement("p",null,"\u535a\u5ba2\u6807\u9898\uff1aYle\u7684\u6d82\u9e26\u677f"),E.createElement("p",null,"\u535a\u5ba2\u94fe\u63a5\uff1ahttps://yleave.top"),E.createElement("p",null,"\u4e00\u8a00\uff1a\u4eba\u751f\u82e6\u77ed\uff0c\u81f3\u5c11\u8be5\u8ba9\u5496\u5561\u2615\u751c\u70b9~"),E.createElement("p",{style:{marginTop:"2rem",fontSize:"17px"}},"\u4e0d\u9700\u8981\u56fe\u7247\u94fe\u63a5\uff0c\u4e0b\u9762\u7684\u662f\u672c\u535a\u5ba2\u7684\u5934\u50cf\u94fe\u63a5\uff0c\u6b22\u8fce\u81ea\u53d6\u4fe1\u606f\u4e92\u52a0\u53cb\u94fe"),E.createElement("p",null,"\u5934\u50cf\u94fe\u63a5\uff1ahttps://gitee.com/ylea/imagehost1/raw/master/img/zzm3.jpg"),E.createElement("p",{style:{marginTop:"2rem",fontSize:"17px",color:"#c4c4c4"}},"\u76ee\u524d\u6682\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u4eba\u7269\u6a21\u578b\uff0c\u540e\u7eed\u4f1a\u8003\u8651\u52a0\u4e0a")),E.createElement("div",{className:"friends-description-right"},E.createElement("img",{src:"https://gitee.com/ylea/imagehost1/raw/master/img/friends.png"})))),E.createElement("div",{className:"maze-comment"},E.createElement(L.Z,null)))},t}(E.Component),D=function(e){var t=this,n=e.name;(0,w.Z)(this,"init",(function(){m.load("https://cdn.jsdelivr.net/gh/yleave/models/RobotExpressive.glb",(function(e){var n=e.scene;n.scale.set(60,60,60),n.position.y=-250;var i=Math.random()<.5?1:-1,a=Math.random()<.5?1:-1,l=3e3*Math.random(),s=3e3*Math.random();l<1500?s=1500+1500*Math.random():s<1500&&(l=1500+1500*Math.random()),n.position.x=l*i,n.position.z=s*a;var r=e.animations;t.mixer=new S.Xcj(n);for(var c=0;c<r.length;c++){var d=r[c],m=t.mixer.clipAction(d);t.actions[d.name]=m,(t.emotes.indexOf(d.name)>=0||t.state.indexOf(d.name)>=4)&&(m.clampWhenFinished=!0,m.loop=S.jAl)}t.activeAction=t.actions[t.activeState],t.activeAction.play(),n.rotateY(t.angle),o.add(n),t.model=n;var u=n.position.clone();u.y=65;var h=t.createLabel(t.name,u);t.label=h,o.add(h)}))})),(0,w.Z)(this,"activeEmote",(function(e){t.pause=!0,t.fadeToAction(e,.2),t.mixer.addEventListener("finished",t.restoreState)})),(0,w.Z)(this,"restoreState",(function(){t.mixer.removeEventListener("finished",t.restoreState),t.fadeToAction(t.activeState,.2),t.pause=!1})),(0,w.Z)(this,"update",(function(){var e=null!=t.model&&!t.pause,n=+new Date;if(n-t.prevTime>t.timeout){t.prevTime=n;var i=t.state[Math.floor(Math.random()*t.state.length)];i!==t.activeState&&e&&(t.activeState=i,t.fadeToAction(i,.5),t.model.rotateY(-t.angle),t.angle=2*Math.random()*Math.PI,t.model.rotateY(t.angle))}var a=t.clock.getDelta();t.mixer&&t.mixer.update(a),!e||"Walking"!==t.activeState&&"Running"!==t.activeState||t.move()})),(0,w.Z)(this,"move",(function(){var e=t.speed[t.activeState],n=Math.sin(t.angle)*e,i=Math.cos(t.angle)*e,a=n+t.model.position.x,o=i+t.model.position.z;(a>=3e3||a<=-3e3||o>=3e3||o<=-3e3||a<=1400&&a>=-1400&&o<=1400&&o>=-1400)&&(t.model.rotateY(-t.angle),t.angle=(t.angle+Math.PI)%(2*Math.PI),t.model.rotateY(t.angle),n=Math.sin(t.angle)*e,i=Math.cos(t.angle)*e,a=n+t.model.position.x,o=i+t.model.position.z),t.label.position.x=a,t.label.position.z=o,t.model.position.x=a,t.model.position.z=o})),(0,w.Z)(this,"createLabel",(function(e,t){var n=document.createElement("div");n.className="model-label",n.textContent=e,n.name=e;var i=new z.j(n);return i.position.set(t.x,t.y,t.z),i})),(0,w.Z)(this,"despose",(function(){var e=t.activeAction,n=t.model;t.mixer.uncacheAction(e,n),t.activeAction=null,t.model=null,t.mixer=null,t.clock=null,t.actions=null,t.label=null})),(0,w.Z)(this,"fadeToAction",(function(e,n){var i=t.activeAction,a=i;i=t.actions[e],a.fadeOut(n),i.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(n).play(),t.activeAction=i})),this.state=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.activeState="Walking",this.mixer=null,this.model=null,this.actions={},this.activeAction=null,this.prevTime=+new Date,this.speed={Walking:3,Running:5},this.clock=new S.SUY,this.angle=2*Math.random()*Math.PI,this.label=null,this.pause=!1,this.name=n,this.timeout=8e3*Math.random()+8e3}}}]);