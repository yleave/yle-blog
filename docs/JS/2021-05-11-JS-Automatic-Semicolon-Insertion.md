---
slug: JS-Automatic-Semicolon-Insertion
title: JSè‡ªåŠ¨æ’å…¥åˆ†å·æœºåˆ¶ASI
---

import Highlight from '@site/src/components/Highlight';
import CustomComponent from '@site/src/components/CustomComponent';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Comment from '@site/src/components/Comment';


<CustomComponent tags={["ASI", "JSè¿è¡Œæœºåˆ¶"]} time="2021-05-11" />

## é—®é¢˜èƒŒæ™¯

&emsp;&emsp;æ•²ä»£ç çš„æ—¶å€™å†™äº†ä¸€æ¡åˆ¤æ–­è¯­å¥ï¼Œå¤§è‡´ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªé•¿æ–¹ä½“æ˜¯å¦è´´åˆï¼Œå› æ­¤éœ€è¦å¯¹ä¸‰ä¸ªç»´åº¦åˆ†åˆ«è¿›è¡Œåˆ¤æ–­ï¼š

```js
return check(b1.min.x, b2.min.x) && check(b1.max.x, b2.max.x)
    && check(b1.min.y, b2.min.y) && check(b1.max.y, b2.max.y)
    && check(b1.min.z, b2.min.z) && check(b1.max.z, b2.max.z);
```

&emsp;&emsp;å› ä¸ºè¯­å¥æ¯”è¾ƒé•¿ï¼Œå› æ­¤å°±å°†å…¶åˆ†è¡Œï¼ŒæŒ‰ç…§ç¼–ç ç»éªŒæ¥è¯´ï¼Œè¿™ç§åˆ†è¡Œçš„å†™æ³•**è‚¯å®šæ˜¯æ²¡é”™çš„**ï¼Œä¸è¿‡åˆæƒ³èµ·äº†ä¹‹å‰åœ¨å­¦ä¹  JS çš„æ—¶å€™æœ‰çœ‹è¿‡è¿™ä¹ˆä¸€ä¸ªæ¦‚å¿µï¼š**JS ä¼šåœ¨è¡Œæœ«è‡ªåŠ¨åŠ ä¸Šåˆ†å·ï¼Œå› æ­¤ JS ä»£ç ä¸­çš„åˆ†å·å¯ä»¥çœç•¥ã€‚**ä¸è¿‡å¦‚æœçœŸæ˜¯è¿™æ ·çš„è¯ä¸Šé¢çš„ä»£ç å²‚ä¸æ˜¯ä¼šåœ¨ç¬¬ä¸€è¡Œæœ«å°±åŠ ä¸Šåˆ†å·å—ï¼Ÿ



&emsp;&emsp;å‡ºç°äº†çŸ›ç›¾ï¼Œæ—¢ç„¶ä¸Šé¢çš„ä»£ç ä¸ä¼šå‡ºé”™ï¼Œé‚£å°±æ˜¯ä¹‹å‰å­¦ä¹ çš„çŸ¥è¯†å†…å®¹å‡ºç°äº†åå·®ï¼Œå› æ­¤å€Ÿè¿™ä¸ªæœºä¼šæ•´ç†äº†ä¸€ä¸‹ **ASIï¼ˆAutomatic Semicolon Insertion ï¼Œè‡ªåŠ¨æ’å…¥åˆ†å·æœºåˆ¶ï¼‰** çš„çŸ¥è¯†ã€‚





&emsp;&emsp;å­¦ä¹ ä¹‹æ—¶ï¼Œçœ‹äº†ä¸€äº›å…³äº **JS è¯­å¥åæ˜¯å¦åº”è¯¥åŠ åˆ†å·**çš„å›ç­”ï¼Œæ‰å‘ç°è¿™ä¸ªé—®é¢˜å¾ˆæ—©ä¹‹å‰å°±è¢«è¯¸å¤šå¤§ç¥ä»¬çƒ­çƒˆè®¨è®ºè¿‡äº†ï¼Œå·²æ²¦ä¸ºåŠ åˆ†å·å…šå’Œä¸åŠ åˆ†å·å…šä¹‹é—´æ—·æ—¥æŒä¹…çš„å£æ°´æˆ˜ã€‚è™½ç„¶çœ‹äº†ä¸€åœˆä¸‹æ¥ï¼Œå¤šæ•°å†™å›ç­”çš„å¤§ä½¬éƒ½ä¼šæ›´åå‘äºä¸åŠ åˆ†å·çš„å½¢å¼ï¼Œä¸åŠ åˆ†å·çš„è§‚ç‚¹ä¸»è¦è¿˜æ˜¯ï¼š

1. ç¨‹åºå‘˜æ€»æœ‰çŠ¯è¿·ç³Šå¿˜äº†åŠ åˆ†å·çš„æ—¶å€™ï¼Œè¿™æ · ASI å°±æ— æ³•åŒºåˆ†æ˜¯æœ‰æ„ä¸å†™è¿˜æ˜¯æ— æ„ä¸­å¿˜äº†å†™
2. å³ä½¿å…¨éƒ½åŠ ä¸Šåˆ†å·ï¼Œä¹Ÿä¸èƒ½è§£å†³ ASI çš„ä¸€äº›ç¼ºé™·ï¼ˆ`return` æ¢è¡Œåä¼šè‡ªåŠ¨æ’å…¥åˆ†å·ï¼‰
3. å¯¹å…¨åŠ åˆ†å·åè¯­ä¹‰è¡¨è¾¾åˆ¤æ–­çš„æˆæœ¬é—®é¢˜ï¼ˆå¦‚å‡½æ•°è¡¨è¾¾å¼çš„ `}` åæ˜¯å¦éƒ½éœ€è¦åŠ ä¸Šåˆ†å·ï¼‰
4. ä¸åŠ åˆ†å·çš„è¯é™¤äº†å‡ ç§ç‰¹æ®Šæƒ…å†µï¼ˆä¸‹æ–‡æœ‰ï¼‰ï¼Œå…¶ä½™æƒ…å†µå¹¶ä¸ä¼šå½±å“åˆ°ç¨‹åºçš„æ­£å¸¸è¿è¡Œï¼Œä¸”ç‰¹æ®Šæƒ…å†µçš„å‡ºç°æ¦‚ç‡è¿˜å¾ˆå°

&emsp;&emsp;å¯¹æˆ‘ä¸ªäººæ¥è¯´ï¼Œæˆ‘æ˜¯ä¹ æƒ¯åœ¨è¯­å¥ååŠ ä¸Šåˆ†å·çš„ï¼Œä¸åŠ åˆ†å·å°±ä¼šæœ‰ç‚¹ä¸èˆ’æœï¼ˆç¼–ç å¼ºè¿«ç—‡æ‚£è€…ï¼‰ï¼Œä¸è¿‡æˆ‘å¯¹è¿™ä¸ªé—®é¢˜è¿˜æ˜¯ä¿æŒä¸­ç«‹çš„ï¼ŒåŠ åˆ†å·å’Œä¸åŠ åˆ†å·è¯´åˆ°åº•ä¹Ÿå°±æ˜¯ç¼–ç é£æ ¼é—®é¢˜ï¼ŒçœŸè¦è¯´å…¶å®ä¸¤è€…éƒ½æœ‰çŠ¯é”™çš„å¯èƒ½ï¼ŒæŒ‰ç…§è‡ªå·±ç¼–ç ä¹ æƒ¯æ¥ï¼Œèˆ’èˆ’æœæœçš„æœ€å¥½ã€‚è€Œå®é™…åœ¨å›¢é˜Ÿåˆä½œæ—¶ï¼Œä¸ç®¡ä½ ä¸ªäººç¼–ç¨‹ä¹ æƒ¯å¦‚ä½•ï¼Œåªè¦é…ç½®äº†ç¬¦åˆå›¢é˜Ÿç¼–ç é£æ ¼çš„æ ¼å¼åŒ–ä»£ç é…ç½®ï¼Œæˆ‘è§‰å¾—å°±æ˜¯æ²¡é—®é¢˜çš„ã€‚



## ASI æ’å…¥åˆ†å·çš„æ—¶æœº



### 1. JS ä¸­ä¸€äº›è¯­æ³•ååŠ ä¸Šæ¢è¡Œç¬¦åä¼šè‡ªåŠ¨åŠ ä¸Šåˆ†å·

- åç½®è¿ç®—ç¬¦ï¼ˆ`++` å’Œ `--`ï¼‰
- `continue`
- `break`
- `return`
- `yield`ã€`yield*`
- `module`

æˆ‘ä»¬ä»¥ `return` è¯­å¥ä¸ºä¾‹ï¼š

```js
// æ­£å¸¸è¿”å›ä¸€ä¸ªå¯¹è±¡
return {
    a: 1
}
```

```js
return
{
    a: 1
}

// è§£æä¸º
return;
{
    a: 1
};
```

&emsp;&emsp;è¿™ç§æƒ…å†µä¸‹ï¼Œ`return` è¿”å›å€¼ä¸º `undefined`ï¼Œè¿”å›ç»“æœæ˜¾ç„¶ä¸æˆ‘ä»¬é¢„æœŸä¸ç¬¦ã€‚





### 2. å¹¶å…¥æ–°è¡Œåè‹¥æˆä¸ºéæ³•è¯­å¥åˆ™ä¼šè‡ªåŠ¨æ’å…¥åˆ†å·

&emsp;&emsp;JS ä»£ç åœ¨è§£ææ—¶ä¼šæŠŠæ¢è¡Œç¬¦ä½œä¸ºè§£æçš„ä¾æ®ä¹‹ä¸€ï¼Œå®ƒä¼šå°½é‡æ‹¼æ¥ä¸‹ä¸€è¡Œçš„è¯­å¥ï¼Œä¸è¿‡è‹¥æ˜¯æ‹¼æ¥ä¸Šåä¸èƒ½æˆä¸ºä¸€ä¸ªå®Œæ•´çš„è¯­å¥ï¼Œåˆ™ä¼šåœ¨ä¸­é—´æ’å…¥åˆ†å·ï¼Œå¦‚ï¼š

```js
a = b
++c

// è¿™æ®µä»£ç ä¼šè¢«æ­£ç¡®è§£æä¸º
a = b;
++c;
```

&emsp;&emsp;å› ä¸ºè‹¥ä¸¤è¡Œä»£ç å¹¶åœ¨ä¸€èµ·æ˜¾ç„¶æ˜¯ä¼šæŠ¥é”™çš„ï¼š

```js
a = b++c;
```



&emsp;&emsp;å†æ¥çœ‹çœ‹å…¶ä»–èƒ½å¤Ÿæ­£ç¡®è§£æçš„ä¾‹å­ï¼š

```js
let a 
a
=
3
console.log(a) //3

// è§£æä¸º
let a;
a = 3;
console.log(a); //3
```

```js
let a = 
x
&&
y

&& a

// è§£æä¸º
let a = x && y && a;
```



### 3. ä»¥è‡ªå¢/å‡è¿ç®—ç¬¦ ++ã€-- å¼€å¤´

```js
a
++
b
+
c
// è§£ææˆäº†
a;
++b + c;
```

&emsp;&emsp;æ³¨æ„ï¼Œè¿™ä¸ªå’Œç¬¬ `1.` ä¸­çš„åç½®è¿ç®—ç¬¦ `++`ã€`--` çš„åŒºåˆ«ï¼Œåç½®è¿ç®—ç¬¦åè‹¥è·Ÿçš„æ˜¯æ¢è¡Œç¬¦åˆ™ä¼šåŠ ä¸Šåˆ†å·ï¼Œå‰ç½®è¿ç®—ç¬¦åˆ™ä¼šä¸ä¸‹ä¸€è¡Œå¹¶åœ¨ä¸€èµ·è§£æã€‚



### 4.ç‰¹æ®Šæƒ…å†µ

&emsp;&emsp;å½“ä¸€æ¡è¯­å¥ä»¥ï¼šæ‹¬å·`(`ï¼Œæ–¹æ‹¬å·`[`ï¼Œæ­£åˆ™å¼€å¤´çš„æ–œæ `/`ï¼ŒåŠ å·`+`ï¼Œå‡å·`-` å¼€å¤´çš„è¯ï¼Œé‚£ä¹ˆææœ‰å¯èƒ½å’Œå‰é¢ä¸€æ¡è¯­å¥ä¸€èµ·è§£æï¼Œ**è¿™ç§æƒ…å†µä¸‹ä»…ä¾é è§£æè§„åˆ™çš„è¯å¯èƒ½ä¼šå‡ºé—®é¢˜ï¼Œå› æ­¤æœ€å¥½è‡ªå·±åŠ ä¸Šåˆ†å·ã€‚**

å¦‚ï¼š

```js
let a = b
(function() {
	...
})()

// è§£æä¸º
let a = b(function () {
  ...
})();
```

&emsp;&emsp;æˆ‘ä»¬çš„æœ¬æ„æ˜¯å°† `b` èµ‹å€¼ç»™ `a`ï¼Œç„¶åä¸‹é¢æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„å‡½æ•°ï¼Œè‹¥æ²¡æ ‡æ˜åˆ†å·çš„è¯é‚£ä¹ˆå°±å˜æˆäº†å¦ä¸€ä¸ªä¸çŸ¥é“èƒ½å¦æ‰§è¡Œçš„ä»£ç äº†...



å†å¦‚ï¼š

```js
a = b
[1,2,3].forEach(function(e){
    console.log(e)
})

// è§£æä¸º
a = b[(1, 2, 3)].forEach(function (e) {
    console.log(e);
});
```



å†å¦‚ï¼š

```js
// è¿™æ˜¯ä¸€æ®µæ²¡é—®é¢˜çš„ä»£ç 
function a() {
...
}
[1,2,3].forEach(...)
```

&emsp;&emsp;è€Œè‹¥æ˜¯æ¢ç§æ–¹å¼å†™çš„è¯ï¼š

```js
var a = function() {
  ...
}
[1,2,3].forEach(...)

// é—®é¢˜å°±å¤§äº†ï¼ï¼è§£æåå˜æˆä¸‹é¢è¿™æ ·
var a = function () {}[(1, 2, 3)].forEach();
```

### 4.1 ä¸€ä¸ªå®ä¾‹

&emsp;&emsp;åœ¨åˆ·åŠ›æ‰£çš„æ—¶å€™ï¼Œå†™äº†ä¸€ä¸ªè¦è¿›è¡Œæ•°ç»„å…ƒç´ äº¤æ¢çš„æ“ä½œï¼š`[nums[i], nums[j]] = [nums[j], nums[i]];`ï¼Œä¸è¿‡å‡ºäº†ä¸ªbugï¼Œä¸ºäº†è¿›è¡Œè°ƒè¯•ï¼Œä½¿ç”¨ `console.log` æ‰“å°äº†ä¸€äº›ä¿¡æ¯ï¼Œç„¶åå°±å‡ºé”™äº†ï¼Œå‡ºé”™ä»£ç å¦‚ä¸‹ï¼š

```js
console.log(i, j)
[nums[i], nums[j]] = [nums[j], nums[i]];
```

&emsp;&emsp;æŠ¥é”™æ˜¯ï¼š`Uncaught TypeError: Cannot set property '5' of undefined`

&emsp;&emsp;åˆšçœ‹åˆ°æŠ¥é”™ä¿¡æ¯æ—¶å¾ˆçº³é—·ï¼Œä¸è¿‡å†çœ‹äº†çœ¼ä»£ç ï¼Œå‘ç°å°‘äº†ä¸ªåˆ†å·ï¼Œç„¶åå›æƒ³èµ·ä¹‹å‰å†™è¿‡çš„è¿™ç¯‡æ–‡ç« çš„å†…å®¹å°±æ˜ç™½æ˜¯ä¸ºä»€ä¹ˆäº†~

&emsp;&emsp;æ”¾åˆ° `babel` ä¸­ä¸€çœ‹ï¼Œæœç„¶æ˜¯è¿™æ ·ï¼šç”±äºæ‹¬å·åæ²¡åŠ åˆ†å·ï¼Œä¸” `[]` å¯ä»¥çœ‹ä½œæ˜¯å±æ€§å€¼è·å–æ“ä½œï¼Œå› æ­¤è¿™ä¸¤å¥å°±æ”¾åˆ°ä¸€èµ·è§£æäº†ã€‚

```js
console.log(i, j)[(nums[i], nums[j])] = [nums[j], nums[i]];
```




## å¦‚ä½•æŸ¥çœ‹è‡ªåŠ¨æ’å…¥åˆ†å·åçš„ä»£ç 

&emsp;&emsp;å¯ä»¥åœ¨ä»£ç æ‰€å±çš„é¡¹ç›®ä¸­é…ç½®ä»£ç æ ¼å¼åŒ–æ’ä»¶ï¼Œå¦‚ `Prettier`ï¼Œä¸è¿‡å¤ªéº»çƒ¦äº†ï¼ˆä¸»è¦æ˜¯ä¸çŸ¥é“æ€ä¹ˆé…ğŸ¤¡ï¼‰ï¼Œä¸è¿‡åˆ†å·æ’å…¥ä¹Ÿç®—ä»£ç ç¿»è¯‘çš„ä¸€ç§å§ï¼Œé‚£ä¹ˆä¸å°±èƒ½ä½¿ç”¨ `babel` æ¥è½¬è¯‘çœ‹çœ‹ä¹ˆğŸ˜ï¼Œä¸Šé¢æ²¡åŠ åˆ†å·çš„ä»£ç éƒ½æ˜¯è¿™æ ·è½¬è¯‘è¿‡æ¥çš„ã€‚

[babelå®˜ç½‘åœ¨çº¿è½¬è¯‘](https://www.babeljs.cn/repl#?browsers=defaults%2C%20not%20ie%2011%2C%20not%20ie_mob%2011&build=&builtIns=false&corejs=3.6&spec=false&loose=false&code_lz=Q&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=env%2Creact%2Cstage-2&prettier=false&targets=&version=7.14.1&externalPlugins=)



## å°ç»“

&emsp;&emsp;å…³äº JS è¯­å¥æ˜¯å¦åº”è¯¥åŠ ä¸Šåˆ†å·çš„ä¸ªäººæ„Ÿæƒ³å‰é¢å·²ç»è¯´è¿‡äº†ï¼ŒASI æ’å…¥åˆ†å·çš„è§„åˆ™å¦‚ä¸Šé¢å‡ ä¸ªå°æ ‡é¢˜ã€‚

&emsp;&emsp;è¿™è¾¹å†å¼•ç”¨ä¸€ä¸‹[@ç”°ä¹](https://www.zhihu.com/question/20298345/answer/14690437)å’Œ[@å°¤é›¨æºª](https://www.zhihu.com/question/20298345/answer/49551142)çš„å›ç­”æ¥ä½œä¸ºä¸€ä¸ªå°ç»“å§ï¼š

> ç”°ä¹ï¼š
>
> åŠ ä¸ä¸åŠ æ˜¯é£æ ¼é—®é¢˜ï¼Œé£æ ¼äº‰è®®ä¸éœ€è¦æœ‰ä¸ªå®šè®ºã€‚å…³é”®çš„é—®é¢˜åœ¨äºå¦‚ä½•â€œäº‰è®ºâ€ï¼Œå¤„ç†å¥½å†²çªï¼Œå­¦ä¼šç»„ç»‡è¯­è¨€å‡å°‘äº‰è®®æ˜¯æœ€é‡è¦çš„ã€‚å› ä¸ºåˆ†å·é—®é¢˜åœ¨ç¤¾åŒºå†…éƒ¨é€ æˆäº†å¾ˆå¤šå†µæ—¥æŒä¹…çš„å£æ°´æˆ˜ï¼Œè¿™äº›å£æ°´æˆ˜æ˜¯ç¤¾åŒºçš„æŸå¤±â€¦â€¦å› ä¸ºå¤§å®¶åœ¨è¿™ä¸ªæ—¶å€™å¯ä»¥å†™æ›´å¤šçš„ä»£ç å¸¦æ¥æ›´å¤šçš„åŠŸèƒ½ã€‚
> 		 ç±»ä¼¼çš„é—®é¢˜è¿˜æœ‰AMDçš„moduleï¼Œæœ‰çš„åº“é€‰æ‹©å…¼å®¹AMDï¼Œæœ‰çš„äººä¸æ„¿æ„ã€‚å…¬è®¤ç»“è®ºæ˜¯åº”è¯¥å°Šé‡ä½œè€…çš„é€‰æ‹©ï¼Œä¸è¦å› ä¸ºè¿™äº›é£æ ¼é—®é¢˜è€Œforkã€‚module loaderåº”è¯¥è®¾æ³•ç»•è¿‡è¿™äº›é—®é¢˜ï¼Œæä¾›å…¼å®¹çš„è§£å†³æ–¹æ¡ˆã€‚

> å°¤é›¨æºªï¼š
>
> çœŸæ­£ä¼šå¯¼è‡´ä¸Šä¸‹è¡Œè§£æå‡ºé—®é¢˜çš„ token æœ‰ 5 ä¸ªï¼šæ‹¬å·ï¼Œæ–¹æ‹¬å·ï¼Œæ­£åˆ™å¼€å¤´çš„æ–œæ ï¼ŒåŠ å·ï¼Œå‡å·ã€‚æˆ‘è¿˜ä»æ²¡è§è¿‡å®é™…ä»£ç ä¸­ç”¨æ­£åˆ™ã€åŠ å·ã€å‡å·ä½œä¸ºè¡Œé¦–çš„æƒ…å†µï¼Œæ‰€ä»¥æ€»ç»“ä¸‹æ¥å°±æ˜¯ä¸€å¥è¯ï¼šä¸€è¡Œå¼€å¤´æ˜¯æ‹¬å·æˆ–è€…æ–¹æ‹¬å·çš„æ—¶å€™åŠ ä¸Šåˆ†å·å°±å¯ä»¥äº†ï¼Œå…¶ä»–æ—¶å€™å…¨éƒ¨ä¸éœ€è¦ã€‚å…¶å®å³ä½¿æ˜¯è¿™ä¸¤ç§æƒ…å†µï¼Œåœ¨å®é™…ä»£ç ä¸­ä¹Ÿé¢‡ä¸ºå°‘è§ã€‚



## REF

- [JavaScript è¯­å¥ååº”è¯¥åŠ åˆ†å·ä¹ˆï¼Ÿ - çŸ¥ä¹](https://www.zhihu.com/question/20298345) 
- [MDN è‡ªåŠ¨åˆ†å·è¡¥å…¨](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Lexical_grammar#%E8%87%AA%E5%8A%A8%E5%88%86%E5%8F%B7%E8%A1%A5%E5%85%A8)
- [æ˜é‡‘ JSä»£ç è¦ä¸è¦åŠ åˆ†å·?](https://juejin.cn/post/6864135607468163079) 




<Comment />
