(self.webpackChunkyle_blog=self.webpackChunkyle_blog||[]).push([[1073],{20895:function(e,t,n){"use strict";n.d(t,{dK:function(){return o},_k:function(){return l},vc:function(){return s},rx:function(){return c},qo:function(){return r},Hk:function(){return d},Iz:function(){return m}});var a=n(31336),i=n.n(a);n(30892)(i()),n(54212).w(i()),n(74182)(i());var o=["en","zh"],l=!1,s=null,c="5228ca85",r=8,d=50,m={search_placeholder:"Search",see_all_results:"\u67e5\u770b\u6240\u6709\u76f8\u5173\u7ed3\u679c\ud83d\udc40",no_results:"\u62b1\u6b49\uff0c\u6682\u65f6\u6ca1\u6709\u8fd9\u65b9\u9762\u7684\u6587\u7ae0\ud83d\ude23.",search_results_for:'\u5173\u4e8e "{{ keyword }}" \u7684\u6240\u6709\u6587\u7ae0',search_the_documentation:"\u4ece\u5f53\u524d\u7ad9\u70b9\u4e2d\u67e5\u627e\u5173\u952e\u5b57",count_documents_found:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",count_documents_found_plural:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",no_documents_were_found:"\u5565\u4e5f\u6ca1\u627e\u5230\uff0c\u6362\u4e00\u4e2a\u5173\u952e\u8bcd\u5427\ud83d\ude35"}},25205:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});n(77467);var a,i,o,l,s,c,r,d,m,u,h,v=n(70302),A=n(63349),p=n(41788),f=n(96156),g=n(67294),w=n(86591),M=n(99105),E=n(2212),x=n(52886),S=n(17047),b=n(10338),y=n(29276),k=n(36194),Z=n(54734),z=n(27219),L=n.p+"assets/images/grasslight-big-43728102ca7c7ab4a5e3eedb0572f7b9.jpg",W=function(e){function t(){var t;return t=e.call(this)||this,(0,f.Z)((0,A.Z)(t),"initDialog",(function(){(d=document.createElement("div")).className="model-dialog";var e=document.createElement("div");(u=document.createElement("a")).target="_blank",e.appendChild(u),h=document.createElement("div"),d.append(e,h),(m=new y.j(d)).name="dialog"})),(0,f.Z)((0,A.Z)(t),"clickLabel",(function(e){var n=e.target.name,a=n&&t.modelsMap[n];if(a){var l=a.model;if(t.lastActiveModel&&t.lastActiveModel!==l&&(t.lastActiveModel.activeEmote("Wave"),t.lastActiveModel.pause=!1,o.remove(m),t.lastActiveModel=null),l.activeEmote("Wave"),o.getObjectByName("dialog"))o.remove(m);else{var s=l.model.position;m.position.set(s.x,s.y+450,s.z),setTimeout((function(){return l.pause=!0}),2e3),u.innerText=a.blogTitle,u.href=a.friendAddr,h.innerText=a.aWord,o.add(m);var c=1200*Math.sin(l.angle),r=1200*Math.cos(l.angle),d=c+l.model.position.x,v=r+l.model.position.z;new k.kX(i.position).to({x:d,y:400,z:v},800).easing(k.oY.Quadratic.Out).start().onComplete((function(){i.lookAt(s)})),t.lastActiveModel=l}}else o.getObjectByName("dialog")&&(o.remove(m),t.lastActiveModel&&(t.lastActiveModel.activeEmote("Wave"),t.lastActiveModel=null))})),(0,f.Z)((0,A.Z)(t),"getMouse",(function(e){var t=a.domElement,n=new E.FM8;return n.x=(e.clientX-t.getBoundingClientRect().left)/t.offsetWidth*2-1,n.y=-(e.clientY-t.getBoundingClientRect().top)/t.offsetHeight*2+1,n})),(0,f.Z)((0,A.Z)(t),"getIntersects",(function(e){var t=new E.iMs;t.setFromCamera(e,i);var n=t.intersectObjects(o.children);if(n.length)return n[0]})),(0,f.Z)((0,A.Z)(t),"onWindowResize",(function(){var e=s.clientWidth,t=s.clientHeight;i.aspect=e/t,i.updateProjectionMatrix(),a.setSize(e,t),c.setSize(e,t)})),(0,f.Z)((0,A.Z)(t),"onScrollDown",(function(e){console.log("scroll"),window.scrollTo({top:650,behavior:"smooth"})})),(0,f.Z)((0,A.Z)(t),"renderLoop",(function(){if(t.models.forEach((function(e){e.update()})),a.render(o,i),c.render(o,i),t.rfa=requestAnimationFrame(t.renderLoop),k.Vx(),r.update(),t.houseMixer){var e=t.clock.getDelta();t.houseMixer.update(e)}})),t.models=[],t.modelsMap={},t.lastActiveModel=null,t.houseMixer=null,t.clock=new E.SUY,t}(0,p.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;s=document.getElementById("friends-canvas-container");var t=document.getElementById("friends-canvas"),n=s.clientHeight,d=s.clientWidth;(a=new E.CP7({canvas:t,antialias:!0})).setPixelRatio(window.devicePixelRatio),a.setSize(d,n),(c=new y.M).setSize(d,n),c.domElement.style.position="absolute",c.domElement.style.top="60px",s.appendChild(c.domElement),(r=new z.Z).dom.style.top="60px",s.append(r.dom),(i=new E.cPb(60,d/n,1,3e4)).position.set(5e3,1e3,0),(o=new E.xsS).background=new E.Ilk(13426943),o.fog=new E.ybr(13426943,500,1e4),o.add(new E.Mig(6710886,2));var m=new E.Ox3(14674943,1.2);m.position.set(50,200,100),m.position.multiplyScalar(1.3),m.castShadow=!0,m.shadow.mapSize.width=1024,m.shadow.mapSize.height=1024;var u=300;m.shadow.camera.left=-u,m.shadow.camera.right=u,m.shadow.camera.top=u,m.shadow.camera.bottom=-u,m.shadow.camera.far=1e3,o.add(m),(l=new x.z(i,c.domElement)).maxPolarAngle=.5*Math.PI,l.minDistance=20,l.maxDistance=1e4;var h=(new E.dpR).load(L);h.wrapS=h.wrapT=E.rpg,h.repeat.set(25,25),h.anisotropy=16,h.encoding=E.knz;var v=new E.YBo({map:h}),A=new E.Kj0(new E._12(2e4,2e4),v);A.position.y=-250,A.rotation.x=-Math.PI/2,A.receiveShadow=!0,o.add(A);var p=new b._;p.setDecoderPath("https://unpkg.com/three@0.123.0/examples/js/libs/draco/gltf/");var f=new S.E;f.setDRACOLoader(p),f.load("https://cdn.jsdelivr.net/gh/yleave/yle-blog/models/LittlestTokyo.glb",(function(t){var n=t.scene;n.scale.set(5,5,5),n.position.y=750,n.position.x=400,e.houseMixer=new E.Xcj(n),e.houseMixer.clipAction(t.animations[0]).play(),e.house=n,e.action=t.animations[0],o.add(n)})),fetch("https://qc9pvu.fn.thelarkcloud.com/getFriendList").then((function(e){if(e.ok)return e.json();throw new Error("\u83b7\u53d6\u6570\u636e\u5931\u8d25")})).then((function(t){t.forEach((function(t){var n=t.friendName,a=(t.blogTitle,t.friendAddr,t.aWord,new Y({name:n}));a.init(),e.models.push(a),t.model=a,e.modelsMap[n]=t}))})).catch((function(e){return console.log(e)})),this.initDialog(),window.addEventListener("resize",this.onWindowResize),c.domElement.addEventListener("click",this.clickLabel),this.renderLoop()},n.componentWillUnmount=function(){this.models.forEach((function(e){e.despose()})),o.traverse((function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())}));var e=this.action,t=this.house;this.houseMixer.uncacheAction(e,t),this.action=null,this.house=null,this.houseMixer=null,this.clock=null,this.lastActiveModel=null,window.removeEventListener("resize",this.onWindowResize),c.domElement.removeEventListener("click",this.clickLabel),cancelAnimationFrame(this.rfa)},n.render=function(){return g.createElement(w.Z,null,g.createElement(M.Z,null,g.createElement("title",null,"\u53cb\u94fe | Yle")),g.createElement("div",{id:"friends-canvas-container"},g.createElement("canvas",{id:"friends-canvas"})),g.createElement("div",{className:"friends-scroll-down-bar"},g.createElement("div",{className:"friends-link",onClick:this.onScrollDown},g.createElement("div",{className:"friends-link-text"},"\u6dfb\u52a0\u53cb\u94fe"),g.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwEAYAAAAHkiXEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAA7FJREFUeNrt2F9MU1ccB/DvuRSooK0gEKts4mJbHdnik0tEXYKwFpOakDGYS4hT14SuZsuMxiHJJtvDtswtVVi3BqNOE5MBCdnMHFFZQhYkI3vYhtNBa4zOLJFiacE/Wyn97WFvmMPFIj0m/j5vN/d7f+ec+0vOaS/AGGOMMcYYYyytRKoPLvnW/8+fR+32KZto016xWmU5bQVKsHJkJJLjcdkiAwOqFzxXlkAg8Lc7J+f+pmT8zqHycr18dM2Sosld584BtXWlnfH49PuGVCeS/Em4Mj6pr9d2UDVebGqSBp8SO/B5dzcA4PWqKtUvcK4SFxLn7+UuW6Y1inIxcuaMXr6oPLZmwUtLl478CKDz1q3p9zXVC3rScQMU4wYolvIZMFt0lD4Q/QaDucKP69fz8qTB6L+e5NNEMfGOWCmi0fS/ivZv/qjJyjKbR28v/Cw3V7oea/LmpMNkQo8AvHMfdd4bIBwA7a2oyMgA4vFIRLqwRPYLwjgx8f+VyTTf85ouPzS6KfvUtm1Yh674zRMnZLnkV1oxdI/e2eMtSDFugGLcAMW4AYql/Cli4dojzuDuwsKsTzMOU3FBgSxHl0WPVrNxo2gGiAIBacFVeA5nk0k6jc3i++FhvfENjbQVz7pc4Q5v5ypfKCTL5dEXFKSDB3FVZAtHXZ204Dg2YLnZLCpQQwcsFmnuGQRw/sYNfETtNO506s0zUln4m3X/8DBQWyvE1NQD60i1AXd+favb2hoOoxJ2IByWvoCP/QMhd0kJgF8QmaFgCIPYomliHXy0ZfVqvfETO7Uurcxo1MuJBvEl1los6ICPOvXr6noTo6idnIxUeu22gitXZvXMu/JbvAUpxg1QjBug2Pz/E+5NvEfvDw7SUGavuOB2S3O5aIfTaEQx/UXelhbdwi5qJ3dzc37AvyDoGRuTxWgfTGJnWZnogI9mqpdNbyDa30+/a2ZRf+yYdJ42OkTfxWJ4JB8i5vAr6FHLrzriDO42mfCzYSvejsXSPT55xX4cPnly7EPPhLV1+/Z0jctbkGLcAMW4AYrN+yE8W4vOLvrB0BKPjw/e75p67fhxvbzYJV6lsupqXCUfHIsXS4MrYEfvxYv0NWKiZ2hIWs+RvE17+voAZKE1fet+bA7hh5Vf7I8G+y5dwj2cRlFpqSxHL4tMCjU0jLV53LaqGT6FKMJbkGLcAMW4AYo9NofwQ2vCetF47RotF5fp+cxMae4u5Wmbo1G0qZ4wY4wxxhhjjDHGGHvS/Qdo3yaWKxU4owAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wOS0yM1QxNjoxMzoxMCswODowMCZOycMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDktMjNUMTY6MTM6MTArMDg6MDBXE3F/AAAAU3RFWHRzdmc6YmFzZS11cmkAZmlsZTovLy9ob21lL2FkbWluL2ljb24tZm9udC90bXAvaWNvbl83azl2ajRhZm9lai9kaXF1eGlhbGFqaWFudG91LnN2Z28J8P0AAAAASUVORK5CYII=",className:"friends-link-arrow"}))),g.createElement(v.Z,{title:"\u53cb\u94fe\u6dfb\u52a0\u8bf4\u660e"},g.createElement("div",{className:"friends-link-description"},g.createElement("div",{className:"friends-description-left"},g.createElement("p",{style:{fontSize:"18px"}},"\u8bf7\u6309\u4ee5\u4e0b\u683c\u5f0f\u5728\u8bc4\u8bba\u533a\u56de\u590d\uff1a"),g.createElement("p",null,"\u6635\u79f0\uff1aYle"),g.createElement("p",null,"\u535a\u5ba2\u6807\u9898\uff1aYle\u7684\u6d82\u9e26\u677f"),g.createElement("p",null,"\u535a\u5ba2\u94fe\u63a5\uff1ahttps://yleave.top"),g.createElement("p",null,"\u4e00\u8a00\uff1a\u4eba\u751f\u82e6\u77ed\uff0c\u81f3\u5c11\u8be5\u8ba9\u5496\u5561\u2615\u751c\u70b9~"),g.createElement("p",{style:{marginTop:"2rem",fontSize:"17px"}},"\u4e0d\u9700\u8981\u56fe\u7247\u94fe\u63a5\uff0c\u4e0b\u9762\u7684\u662f\u672c\u535a\u5ba2\u7684\u5934\u50cf\u94fe\u63a5\uff0c\u6b22\u8fce\u81ea\u53d6\u4fe1\u606f\u4e92\u52a0\u53cb\u94fe"),g.createElement("p",null,"\u5934\u50cf\u94fe\u63a5\uff1ahttps://gitee.com/ylea/imagehost1/raw/master/img/zzm3.jpg"),g.createElement("p",{style:{marginTop:"2rem",fontSize:"17px",color:"#c4c4c4"}},"\u76ee\u524d\u6682\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u4eba\u7269\u6a21\u578b\uff0c\u540e\u7eed\u4f1a\u8003\u8651\u52a0\u4e0a")),g.createElement("div",{className:"friends-description-right"},g.createElement("img",{src:"https://gitee.com/ylea/imagehost1/raw/master/img/friends.png"})))),g.createElement("div",{className:"maze-comment"},g.createElement(Z.Z,null)))},t}(g.Component),Y=function(e){var t=this,n=e.name;(0,f.Z)(this,"init",(function(){(new S.E).load("https://cdn.jsdelivr.net/gh/yleave/yle-blog/models/RobotExpressive.glb",(function(e){var n=e.scene;n.scale.set(60,60,60),n.position.y=-250,n.position.x=(1e3+2e3*Math.random())*(Math.random()<.5?1:-1),n.position.z=(1e3+2e3*Math.random())*(Math.random()<.5?1:-1);var a=e.animations;t.mixer=new E.Xcj(n);for(var i=0;i<a.length;i++){var l=a[i],s=t.mixer.clipAction(l);t.actions[l.name]=s,(t.emotes.indexOf(l.name)>=0||t.state.indexOf(l.name)>=4)&&(s.clampWhenFinished=!0,s.loop=E.jAl)}t.activeAction=t.actions[t.activeState],t.activeAction.play(),n.rotateY(t.angle),o.add(n),t.model=n;var c=n.position.clone();c.y=65;var r=t.createLabel(t.name,c);t.label=r,o.add(r)}))})),(0,f.Z)(this,"activeEmote",(function(e){t.pause=!0,t.fadeToAction(e,.2),t.mixer.addEventListener("finished",t.restoreState)})),(0,f.Z)(this,"restoreState",(function(){t.mixer.removeEventListener("finished",t.restoreState),t.fadeToAction(t.activeState,.2),t.pause=!1})),(0,f.Z)(this,"update",(function(){var e=null!=t.model&&!t.pause,n=+new Date;if(n-t.prevTime>t.timeout){t.prevTime=n;var a=t.state[Math.floor(Math.random()*t.state.length)];a!==t.activeState&&e&&(t.activeState=a,t.fadeToAction(a,.5),t.model.rotateY(-t.angle),t.angle=2*Math.random()*Math.PI,t.model.rotateY(t.angle))}var i=t.clock.getDelta();t.mixer&&t.mixer.update(i),!e||"Walking"!==t.activeState&&"Running"!==t.activeState||t.move()})),(0,f.Z)(this,"move",(function(){var e=t.speed[t.activeState],n=Math.sin(t.angle)*e,a=Math.cos(t.angle)*e,i=n+t.model.position.x,o=a+t.model.position.z;(i>=3e3||i<=-3e3||o>=3e3||o<=-3e3||(i<=1e3&&i>=-1e3||o<=1e3&&o>=-1e3))&&(t.model.rotateY(-t.angle),t.angle=(t.angle+Math.PI)%(2*Math.PI),t.model.rotateY(t.angle),n=Math.sin(t.angle)*e,a=Math.cos(t.angle)*e,i=n+t.model.position.x,o=a+t.model.position.z),t.label.position.x=i,t.label.position.z=o,t.model.position.x=i,t.model.position.z=o})),(0,f.Z)(this,"createLabel",(function(e,t){var n=document.createElement("div");n.className="model-label",n.textContent=e,n.name=e;var a=new y.j(n);return a.position.set(t.x,t.y,t.z),a})),(0,f.Z)(this,"despose",(function(){var e=t.activeAction,n=t.model;t.mixer.uncacheAction(e,n),t.activeAction=null,t.model=null,t.mixer=null})),(0,f.Z)(this,"fadeToAction",(function(e,n){var a=t.activeAction,i=a;a=t.actions[e],i.fadeOut(n),a.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(n).play(),t.activeAction=a})),this.state=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.activeState="Walking",this.mixer=null,this.model=null,this.actions={},this.activeAction=null,this.prevTime=+new Date,this.speed={Walking:3,Running:5},this.clock=new E.SUY,this.angle=2*Math.random()*Math.PI,this.label=null,this.pause=!1,this.name=n,this.timeout=8e3*Math.random()+8e3}}}]);