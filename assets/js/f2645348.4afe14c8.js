(self.webpackChunkyle_blog=self.webpackChunkyle_blog||[]).push([[1073],{20895:function(e,t,n){"use strict";n.d(t,{dK:function(){return o},_k:function(){return l},vc:function(){return c},rx:function(){return s},qo:function(){return r},Hk:function(){return d},Iz:function(){return m}});var a=n(31336),i=n.n(a);n(30892)(i()),n(54212).w(i()),n(74182)(i());var o=["en","zh"],l=!1,c=null,s="5228ca85",r=8,d=50,m={search_placeholder:"Search",see_all_results:"\u67e5\u770b\u6240\u6709\u76f8\u5173\u7ed3\u679c\ud83d\udc40",no_results:"\u62b1\u6b49\uff0c\u6682\u65f6\u6ca1\u6709\u8fd9\u65b9\u9762\u7684\u6587\u7ae0\ud83d\ude23.",search_results_for:'\u5173\u4e8e "{{ keyword }}" \u7684\u6240\u6709\u6587\u7ae0',search_the_documentation:"\u4ece\u5f53\u524d\u7ad9\u70b9\u4e2d\u67e5\u627e\u5173\u952e\u5b57",count_documents_found:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",count_documents_found_plural:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",no_documents_were_found:"\u5565\u4e5f\u6ca1\u627e\u5230\uff0c\u6362\u4e00\u4e2a\u5173\u952e\u8bcd\u5427\ud83d\ude35"}},25205:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});n(77467);var a,i,o,l,c,s,r,d,m,u,v=n(70302),A=n(63349),h=n(41788),f=n(96156),p=n(67294),g=n(86591),w=n(99105),E=n(2212),M=n(52886),x=n(17047),S=n(29276),b=n(36194),Z=n(54734),k=n.p+"assets/images/grasslight-big-43728102ca7c7ab4a5e3eedb0572f7b9.jpg",y=function(e){function t(){var t;return t=e.call(this)||this,(0,f.Z)((0,A.Z)(t),"initDialog",(function(){(r=document.createElement("div")).className="model-dialog";var e=document.createElement("div");(m=document.createElement("a")).target="_blank",e.appendChild(m),u=document.createElement("div"),r.append(e,u),(d=new S.j(r)).name="dialog"})),(0,f.Z)((0,A.Z)(t),"clickLabel",(function(e){var n=e.target.name,a=n&&t.modelsMap[n];if(a){var l=a.model;if(t.lastActiveModel&&t.lastActiveModel!==l&&(t.lastActiveModel.activeEmote("Wave"),t.lastActiveModel.pause=!1,o.remove(d),t.lastActiveModel=null),l.activeEmote("Wave"),o.getObjectByName("dialog"))o.remove(d);else{var c=l.model.position;d.position.set(c.x,c.y+450,c.z),setTimeout((function(){return l.pause=!0}),2e3),m.innerText=a.blogTitle,m.href=a.friendAddr,u.innerText=a.aWord,o.add(d);var s=1200*Math.sin(l.angle),r=1200*Math.cos(l.angle),v=s+l.model.position.x,A=r+l.model.position.z;new b.kX(i.position).to({x:v,y:400,z:A},800).easing(b.oY.Quadratic.Out).start().onComplete((function(){i.lookAt(c)})),t.lastActiveModel=l}}else o.getObjectByName("dialog")&&(o.remove(d),t.lastActiveModel&&(t.lastActiveModel.activeEmote("Wave"),t.lastActiveModel=null))})),(0,f.Z)((0,A.Z)(t),"getMouse",(function(e){var t=a.domElement,n=new E.FM8;return n.x=(e.clientX-t.getBoundingClientRect().left)/t.offsetWidth*2-1,n.y=-(e.clientY-t.getBoundingClientRect().top)/t.offsetHeight*2+1,n})),(0,f.Z)((0,A.Z)(t),"getIntersects",(function(e){var t=new E.iMs;t.setFromCamera(e,i);var n=t.intersectObjects(o.children);if(n.length)return n[0]})),(0,f.Z)((0,A.Z)(t),"onWindowResize",(function(){var e=c.clientWidth,t=c.clientHeight;i.aspect=e/t,i.updateProjectionMatrix(),a.setSize(e,t),s.setSize(e,t)})),(0,f.Z)((0,A.Z)(t),"onScrollDown",(function(e){console.log("scroll"),window.scrollTo({top:650,behavior:"smooth"})})),(0,f.Z)((0,A.Z)(t),"renderLoop",(function(){t.models.forEach((function(e){e.update()})),a.render(o,i),s.render(o,i),t.rfa=requestAnimationFrame(t.renderLoop),b.Vx()})),t.models=[],t.modelsMap={},t.lastActiveModel=null,t}(0,h.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;c=document.getElementById("friends-canvas-container");var t=document.getElementById("friends-canvas"),n=c.clientHeight,r=c.clientWidth;(a=new E.CP7({canvas:t,antialias:!0})).setPixelRatio(window.devicePixelRatio),a.setSize(r,n),(s=new S.M).setSize(r,n),s.domElement.style.position="absolute",s.domElement.style.top="60px",c.appendChild(s.domElement),(i=new E.cPb(60,r/n,1,3e4)).position.set(1e3,50,1500),(o=new E.xsS).background=new E.Ilk(13426943),o.fog=new E.ybr(13426943,500,1e4),o.add(new E.Mig(6710886));var d=new E.Ox3(14674943,1);d.position.set(50,200,100),d.position.multiplyScalar(1.3),d.castShadow=!0,d.shadow.mapSize.width=1024,d.shadow.mapSize.height=1024;var m=300;d.shadow.camera.left=-m,d.shadow.camera.right=m,d.shadow.camera.top=m,d.shadow.camera.bottom=-m,d.shadow.camera.far=1e3,o.add(d),(l=new M.z(i,s.domElement)).maxPolarAngle=.5*Math.PI,l.minDistance=50,l.maxDistance=5e3;var u=(new E.dpR).load(k);u.wrapS=u.wrapT=E.rpg,u.repeat.set(25,25),u.anisotropy=16,u.encoding=E.knz;var v=new E.YBo({map:u}),A=new E.Kj0(new E._12(2e4,2e4),v);A.position.y=-250,A.rotation.x=-Math.PI/2,A.receiveShadow=!0,o.add(A);this.friends;fetch("https://qc9pvu.fn.thelarkcloud.com/getFriendList").then((function(e){if(e.ok)return e.json();throw new Error("\u83b7\u53d6\u6570\u636e\u5931\u8d25")})).then((function(t){t.forEach((function(t){var n=t.friendName,a=(t.blogTitle,t.friendAddr,t.aWord,new z({name:n}));a.init(),e.models.push(a),t.model=a,e.modelsMap[n]=t}))})).catch((function(e){return console.log(e)})),this.initDialog(),window.addEventListener("resize",this.onWindowResize),s.domElement.addEventListener("click",this.clickLabel),this.renderLoop()},n.componentWillUnmount=function(){this.models.forEach((function(e){e.despose()})),o.traverse((function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())})),window.removeEventListener("resize",this.onWindowResize),s.domElement.removeEventListener("click",this.clickLabel),cancelAnimationFrame(this.rfa)},n.render=function(){return p.createElement(g.Z,null,p.createElement(w.Z,null,p.createElement("title",null,"\u53cb\u94fe | Yle")),p.createElement("div",{id:"friends-canvas-container"},p.createElement("canvas",{id:"friends-canvas"})),p.createElement("div",{className:"friends-scroll-down-bar"},p.createElement("div",{className:"friends-link",onClick:this.onScrollDown},p.createElement("div",{className:"friends-link-text"},"\u6dfb\u52a0\u53cb\u94fe"),p.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwEAYAAAAHkiXEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAAA7FJREFUeNrt2F9MU1ccB/DvuRSooK0gEKts4mJbHdnik0tEXYKwFpOakDGYS4hT14SuZsuMxiHJJtvDtswtVVi3BqNOE5MBCdnMHFFZQhYkI3vYhtNBa4zOLJFiacE/Wyn97WFvmMPFIj0m/j5vN/d7f+ec+0vOaS/AGGOMMcYYYyytRKoPLvnW/8+fR+32KZto016xWmU5bQVKsHJkJJLjcdkiAwOqFzxXlkAg8Lc7J+f+pmT8zqHycr18dM2Sosld584BtXWlnfH49PuGVCeS/Em4Mj6pr9d2UDVebGqSBp8SO/B5dzcA4PWqKtUvcK4SFxLn7+UuW6Y1inIxcuaMXr6oPLZmwUtLl478CKDz1q3p9zXVC3rScQMU4wYolvIZMFt0lD4Q/QaDucKP69fz8qTB6L+e5NNEMfGOWCmi0fS/ivZv/qjJyjKbR28v/Cw3V7oea/LmpMNkQo8AvHMfdd4bIBwA7a2oyMgA4vFIRLqwRPYLwjgx8f+VyTTf85ouPzS6KfvUtm1Yh674zRMnZLnkV1oxdI/e2eMtSDFugGLcAMW4AYql/Cli4dojzuDuwsKsTzMOU3FBgSxHl0WPVrNxo2gGiAIBacFVeA5nk0k6jc3i++FhvfENjbQVz7pc4Q5v5ypfKCTL5dEXFKSDB3FVZAtHXZ204Dg2YLnZLCpQQwcsFmnuGQRw/sYNfETtNO506s0zUln4m3X/8DBQWyvE1NQD60i1AXd+favb2hoOoxJ2IByWvoCP/QMhd0kJgF8QmaFgCIPYomliHXy0ZfVqvfETO7Uurcxo1MuJBvEl1los6ICPOvXr6noTo6idnIxUeu22gitXZvXMu/JbvAUpxg1QjBug2Pz/E+5NvEfvDw7SUGavuOB2S3O5aIfTaEQx/UXelhbdwi5qJ3dzc37AvyDoGRuTxWgfTGJnWZnogI9mqpdNbyDa30+/a2ZRf+yYdJ42OkTfxWJ4JB8i5vAr6FHLrzriDO42mfCzYSvejsXSPT55xX4cPnly7EPPhLV1+/Z0jctbkGLcAMW4AYrN+yE8W4vOLvrB0BKPjw/e75p67fhxvbzYJV6lsupqXCUfHIsXS4MrYEfvxYv0NWKiZ2hIWs+RvE17+voAZKE1fet+bA7hh5Vf7I8G+y5dwj2cRlFpqSxHL4tMCjU0jLV53LaqGT6FKMJbkGLcAMW4AYo9NofwQ2vCetF47RotF5fp+cxMae4u5Wmbo1G0qZ4wY4wxxhhjjDHGGHvS/Qdo3yaWKxU4owAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wOS0yM1QxNjoxMzoxMCswODowMCZOycMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDktMjNUMTY6MTM6MTArMDg6MDBXE3F/AAAAU3RFWHRzdmc6YmFzZS11cmkAZmlsZTovLy9ob21lL2FkbWluL2ljb24tZm9udC90bXAvaWNvbl83azl2ajRhZm9lai9kaXF1eGlhbGFqaWFudG91LnN2Z28J8P0AAAAASUVORK5CYII=",className:"friends-link-arrow"}))),p.createElement(v.Z,{title:"\u53cb\u94fe\u6dfb\u52a0\u8bf4\u660e"},p.createElement("div",{className:"friends-link-description"},p.createElement("div",{className:"friends-description-left"},p.createElement("p",{style:{fontSize:"18px"}},"\u8bf7\u6309\u4ee5\u4e0b\u683c\u5f0f\u5728\u8bc4\u8bba\u533a\u56de\u590d\uff1a"),p.createElement("p",null,"\u6635\u79f0\uff1aYle"),p.createElement("p",null,"\u535a\u5ba2\u6807\u9898\uff1aYle\u7684\u6d82\u9e26\u677f"),p.createElement("p",null,"\u535a\u5ba2\u94fe\u63a5\uff1ahttps://yleave.top"),p.createElement("p",null,"\u4e00\u8a00\uff1a\u4eba\u751f\u82e6\u77ed\uff0c\u81f3\u5c11\u8be5\u8ba9\u5496\u5561\u2615\u751c\u70b9~"),p.createElement("p",{style:{marginTop:"2rem",fontSize:"17px"}},"\u4e0d\u9700\u8981\u56fe\u7247\u94fe\u63a5\uff0c\u4e0b\u9762\u7684\u662f\u672c\u535a\u5ba2\u7684\u5934\u50cf\u94fe\u63a5\uff0c\u6b22\u8fce\u81ea\u53d6\u4fe1\u606f\u4e92\u52a0\u53cb\u94fe"),p.createElement("p",null,"\u5934\u50cf\u94fe\u63a5\uff1ahttps://gitee.com/ylea/imagehost1/raw/master/img/zzm3.jpg"),p.createElement("p",{style:{marginTop:"2rem",fontSize:"17px",color:"#c4c4c4"}},"\u76ee\u524d\u6682\u4e0d\u652f\u6301\u81ea\u5b9a\u4e49\u4eba\u7269\u6a21\u578b\uff0c\u540e\u7eed\u4f1a\u8003\u8651\u52a0\u4e0a")),p.createElement("div",{className:"friends-description-right"},p.createElement("img",{src:"https://gitee.com/ylea/imagehost1/raw/master/img/friends.png"})))),p.createElement("div",{className:"maze-comment"},p.createElement(Z.Z,null)))},t}(p.Component),z=function(e){var t=this,n=e.name;(0,f.Z)(this,"init",(function(){t.clock=new E.SUY,(new x.E).load("https://cdn.jsdelivr.net/gh/yleave/yle-blog/models/RobotExpressive.glb",(function(e){var n=e.scene;n.scale.set(60,60,60),n.position.y=-250;var a=e.animations;t.mixer=new E.Xcj(n);for(var i=0;i<a.length;i++){var l=a[i],c=t.mixer.clipAction(l);t.actions[l.name]=c,(t.emotes.indexOf(l.name)>=0||t.state.indexOf(l.name)>=4)&&(c.clampWhenFinished=!0,c.loop=E.jAl)}t.activeAction=t.actions[t.activeState],t.activeAction.play(),n.rotateY(t.angle),o.add(n),t.model=n;var s=n.position.clone();s.y=65;var r=t.createLabel(t.name,s);t.label=r,o.add(r)}))})),(0,f.Z)(this,"activeEmote",(function(e){t.pause=!0,t.fadeToAction(e,.2),t.mixer.addEventListener("finished",t.restoreState)})),(0,f.Z)(this,"restoreState",(function(){t.mixer.removeEventListener("finished",t.restoreState),t.fadeToAction(t.activeState,.2),t.pause=!1})),(0,f.Z)(this,"update",(function(){var e=null!=t.model&&!t.pause,n=+new Date;if(n-t.prevTime>t.timeout){t.prevTime=n;var a=t.state[Math.floor(Math.random()*t.state.length)];console.log(a),a!==t.activeState&&e&&(t.activeState=a,t.fadeToAction(a,.5),t.model.rotateY(-t.angle),t.angle=2*Math.random()*Math.PI,t.model.rotateY(t.angle))}var i=t.clock.getDelta();t.mixer&&t.mixer.update(i),!e||"Walking"!==t.activeState&&"Running"!==t.activeState||t.move()})),(0,f.Z)(this,"move",(function(){var e=t.speed[t.activeState],n=Math.sin(t.angle)*e,a=Math.cos(t.angle)*e,i=n+t.model.position.x,o=a+t.model.position.z;(i>=2e3||i<=-2e3||o>=2e3||o<=-2e3)&&(console.log("change angle"),t.model.rotateY(-t.angle),t.angle=(t.angle+Math.PI)%(2*Math.PI),t.model.rotateY(t.angle),n=Math.sin(t.angle)*e,a=Math.cos(t.angle)*e,i=n+t.model.position.x,o=a+t.model.position.z),t.label.position.x=i,t.label.position.z=o,t.model.position.x=i,t.model.position.z=o})),(0,f.Z)(this,"createLabel",(function(e,t){var n=document.createElement("div");n.className="model-label",n.textContent=e,n.name=e;var a=new S.j(n);return a.position.set(t.x,t.y,t.z),a})),(0,f.Z)(this,"despose",(function(){var e=t.activeAction,n=t.model;t.mixer.uncacheAction(e,n)})),(0,f.Z)(this,"fadeToAction",(function(e,n){var a=t.activeAction,i=a;a=t.actions[e],i.fadeOut(n),a.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(n).play(),t.activeAction=a})),this.state=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.activeState="Walking",this.mixer=null,this.model=null,this.actions={},this.activeAction=null,this.prevTime=+new Date,this.clock=null,this.speed={Walking:3,Running:5},this.angle=2*Math.random()*Math.PI,this.label=null,this.pause=!1,this.name=n,this.timeout=8e3*Math.random()+8e3}}}]);