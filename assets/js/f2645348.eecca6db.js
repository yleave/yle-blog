(self.webpackChunkyle_blog=self.webpackChunkyle_blog||[]).push([[1073],{20895:function(e,t,n){"use strict";n.d(t,{dK:function(){return o},_k:function(){return r},vc:function(){return s},rx:function(){return c},qo:function(){return l},Hk:function(){return d},Iz:function(){return u}});var a=n(31336),i=n.n(a);n(30892)(i()),n(54212).w(i()),n(74182)(i());var o=["en","zh"],r=!1,s=null,c="5228ca85",l=8,d=50,u={search_placeholder:"Search",see_all_results:"\u67e5\u770b\u6240\u6709\u76f8\u5173\u7ed3\u679c\ud83d\udc40",no_results:"\u62b1\u6b49\uff0c\u6682\u65f6\u6ca1\u6709\u8fd9\u65b9\u9762\u7684\u6587\u7ae0\ud83d\ude23.",search_results_for:'\u5173\u4e8e "{{ keyword }}" \u7684\u6240\u6709\u6587\u7ae0',search_the_documentation:"\u4ece\u5f53\u524d\u7ad9\u70b9\u4e2d\u67e5\u627e\u5173\u952e\u5b57",count_documents_found:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",count_documents_found_plural:"\u4e00\u5171\u627e\u5230\u4e86 {{ count }} \u7bc7\u76f8\u5173\u6587\u7ae0\ud83d\udc40",no_documents_were_found:"\u5565\u4e5f\u6ca1\u627e\u5230\uff0c\u6362\u4e00\u4e2a\u5173\u952e\u8bcd\u5427\ud83d\ude35"}},77758:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a,i,o,r,s,c=n(63349),l=n(41788),d=n(96156),u=n(67294),h=n(86591),m=n(99105),v=n(2212),p=n(52886),f=n(17047),g=(n(36194),n.p+"assets/images/grasslight-big-43728102ca7c7ab4a5e3eedb0572f7b9.jpg"),w=function(e){function t(){var t;return t=e.call(this)||this,(0,d.Z)((0,c.Z)(t),"onWindowResize",(function(){var e=t.container.clientWidth,n=t.container.clientHeight;i.aspect=e/n,i.updateProjectionMatrix(),a.setSize(e,n)})),(0,d.Z)((0,c.Z)(t),"renderLoop",(function(){t.models.forEach((function(e){e.update()})),a.render(o,i),t.rfa=requestAnimationFrame(t.renderLoop)})),t.models=[],t}(0,l.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){s=document.getElementById("friends-canvas-container");var e=document.getElementById("friends-canvas");(a=new v.CP7({canvas:e,antialias:!0})).setPixelRatio(window.devicePixelRatio);var t=s.clientHeight,n=s.clientWidth;a.setSize(n,t),(i=new v.cPb(60,n/t,1,3e4)).position.set(1e3,50,1500),(o=new v.xsS).background=new v.Ilk(13426943),o.fog=new v.ybr(13426943,500,1e4),o.add(new v.Mig(6710886));var c=new v.Ox3(14674943,1);c.position.set(50,200,100),c.position.multiplyScalar(1.3),c.castShadow=!0,c.shadow.mapSize.width=1024,c.shadow.mapSize.height=1024;var l=300;c.shadow.camera.left=-l,c.shadow.camera.right=l,c.shadow.camera.top=l,c.shadow.camera.bottom=-l,c.shadow.camera.far=1e3,o.add(c),(r=new p.z(i,a.domElement)).maxPolarAngle=.5*Math.PI,r.minDistance=50,r.maxDistance=5e3;var d=(new v.dpR).load(g);d.wrapS=d.wrapT=v.rpg,d.repeat.set(25,25),d.anisotropy=16,d.encoding=v.knz;var u=new v.YBo({map:d}),h=new v.Kj0(new v._12(2e4,2e4),u);h.position.y=-250,h.rotation.x=-Math.PI/2,h.receiveShadow=!0,o.add(h);var m=new x;m.init(),this.models.push(m),window.addEventListener("resize",this.onWindowResize),this.renderLoop()},n.componentWillUnmount=function(){this.models.forEach((function(e){e.despose()})),o.traverse((function(e){"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())})),window.removeEventListener("resize",this.onWindowResize),cancelAnimationFrame(this.rfa)},n.render=function(){return u.createElement(h.Z,null,u.createElement(m.Z,null,u.createElement("title",null,"\u53cb\u94fe\uff08\u672a\u5b8c\u5de5\uff09 | Yle")),u.createElement("div",{id:"friends-canvas-container"},u.createElement("canvas",{id:"friends-canvas"})))},t}(u.Component),x=function(){var e=this;(0,d.Z)(this,"init",(function(){e.clock=new v.SUY,(new f.E).load("https://cdn.jsdelivr.net/gh/yleave/yle-blog/models/RobotExpressive.glb",(function(t){var n=t.scene;n.scale.set(60,60,60),n.position.y=-250;var a=t.animations;e.mixer=new v.Xcj(n);for(var i=0;i<a.length;i++){var r=a[i],s=e.mixer.clipAction(r);e.actions[r.name]=s,e.state.indexOf(r.name)>=4&&(s.clampWhenFinished=!0,s.loop=v.jAl)}e.activeAction=e.actions[e.activeState],e.activeAction.play(),n.rotateY(e.angle),o.add(n),e.model=n}))})),(0,d.Z)(this,"update",(function(){var t=null!=e.model,n=+new Date;if(n-e.prevTime>1e4){e.prevTime=n;var a=e.state[Math.floor(Math.random()*e.state.length)];console.log(a),a!==e.activeState&&t&&(e.activeState=a,e.fadeToAction(a,.5),e.model.rotateY(-e.angle),e.angle=2*Math.random()*Math.PI,e.model.rotateY(e.angle))}var i=e.clock.getDelta();e.mixer&&e.mixer.update(i),!t||"Walking"!==e.activeState&&"Running"!==e.activeState||e.move()})),(0,d.Z)(this,"move",(function(){var t=e.speed[e.activeState],n=Math.sin(e.angle)*t,a=Math.cos(e.angle)*t,i=n+e.model.position.x,o=a+e.model.position.z;(i>=2e3||i<=-2e3||o>=2e3||o<=-2e3)&&(console.log("change angle"),e.model.rotateY(-e.angle),e.angle=(e.angle+Math.PI)%(2*Math.PI),e.model.rotateY(e.angle),n=Math.sin(e.angle)*t,a=Math.cos(e.angle)*t,i=n+e.model.position.x,o=a+e.model.position.z),e.model.position.x=i,e.model.position.z=o})),(0,d.Z)(this,"despose",(function(){var t=e.activeAction,n=e.model;e.mixer.uncacheAction(t,n)})),(0,d.Z)(this,"fadeToAction",(function(t,n){var a=e.activeAction,i=a;a=e.actions[t],i.fadeOut(n),a.reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(n).play(),e.activeAction=a})),this.state=["Walking","Running"],this.activeState="Walking",this.mixer=null,this.model=null,this.actions={},this.activeAction=null,this.prevTime=+new Date,this.clock=null,this.speed={Walking:3,Running:5},this.angle=2*Math.random()*Math.PI}}}]);